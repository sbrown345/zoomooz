function Matrix(){}var Sylvester={version:"0.1.3",precision:1e-6};Matrix.prototype={dup:function(){return Matrix.create(this.elements)},canMultiplyFromLeft:function(a){var b=a.elements||a;return"undefined"==typeof b[0][0]&&(b=Matrix.create(b).elements),this.elements[0].length==b.length},multiply:function(a){var b=!!a.modulus,c=a.elements||a;if("undefined"==typeof c[0][0]&&(c=Matrix.create(c).elements),!this.canMultiplyFromLeft(c))return null;var d,e,f,g,h,i,j=this.elements.length,k=j,l=c[0].length,m=this.elements[0].length,n=[];do{d=k-j,n[d]=[],e=l;do{f=l-e,g=0,h=m;do i=m-h,g+=this.elements[d][i]*c[i][f];while(--h);n[d][f]=g}while(--e)}while(--j);return c=Matrix.create(n),b?c.col(1):c},isSquare:function(){return this.elements.length==this.elements[0].length},toRightTriangular:function(){var a,b,c,d,e=this.dup(),f=this.elements.length,g=f,h=this.elements[0].length;do{if(b=g-f,0===e.elements[b][b])for(j=b+1;j<g;j++)if(0!==e.elements[j][b]){a=[],c=h;do d=h-c,a.push(e.elements[b][d]+e.elements[j][d]);while(--c);e.elements[b]=a;break}if(0!==e.elements[b][b])for(j=b+1;j<g;j++){var i=e.elements[j][b]/e.elements[b][b];a=[],c=h;do d=h-c,a.push(b>=d?0:e.elements[j][d]-e.elements[b][d]*i);while(--c);e.elements[j]=a}}while(--f);return e},determinant:function(){if(!this.isSquare())return null;var a,b=this.toRightTriangular(),c=b.elements[0][0],d=b.elements.length-1,e=d;do a=e-d+1,c*=b.elements[a][a];while(--d);return c},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(a){var b=a.elements||a;"undefined"==typeof b[0][0]&&(b=Matrix.create(b).elements);var c,d,e,f=this.dup(),g=f.elements[0].length,h=f.elements.length,i=h,j=b[0].length;if(h!=b.length)return null;do{c=i-h,d=j;do e=j-d,f.elements[c][g+e]=b[c][e];while(--d)}while(--h);return f},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var a,b,c,d,e,f,g,h=this.elements.length,i=h,j=this.augment(Matrix.I(h)).toRightTriangular(),k=j.elements[0].length,l=[];do{a=h-1,e=[],c=k,l[a]=[],f=j.elements[a][a];do d=k-c,g=j.elements[a][d]/f,e.push(g),d>=i&&l[a].push(g);while(--c);for(j.elements[a]=e,b=0;a>b;b++){e=[],c=k;do d=k-c,e.push(j.elements[b][d]-j.elements[a][d]*j.elements[b][a]);while(--c);j.elements[b]=e}}while(--h);return Matrix.create(l)},setElements:function(a){var b,c=a.elements||a;if("undefined"!=typeof c[0][0]){var d,e,f,g=c.length,h=g;this.elements=[];do{b=h-g,d=c[b].length,e=d,this.elements[b]=[];do f=e-d,this.elements[b][f]=c[b][f];while(--d)}while(--g);return this}var i=c.length,j=i;this.elements=[];do b=j-i,this.elements.push([c[b]]);while(--i);return this}},Matrix.create=function(a){var b=new Matrix;return b.setElements(a)},Matrix.I=function(a){var b,c,d,e=[],f=a;do{b=f-a,e[b]=[],c=f;do d=f-c,e[b][d]=b==d?1:0;while(--c)}while(--a);return Matrix.create(e)},PureCSSMatrix=function(){"use strict";function a(a){a&&null!==a&&"none"!=a?a instanceof Matrix?this.setMatrix(a):this.setMatrixValue(a):this.m=Matrix.I(3)}function b(a){var b=parseFloat(c(a));return a.match(e)&&(b=2*Math.PI*b/360),b}function c(a){return a.match(f)}function d(a){return Number(a).toFixed(6)}var e=/deg$/,f=/([0-9.\-e]+)/g,g=/([a-zA-Z]+)\(([^\)]+)\)/g;return a.prototype.setMatrix=function(a){this.m=a},a.prototype.setMatrixValue=function(a){for(var d,e=Matrix.I(3);null!==(d=g.exec(a));){var f,h=d[1].toLowerCase(),i=d[2].split(",");if("matrix"==h)f=Matrix.create([[parseFloat(i[0]),parseFloat(i[2]),parseFloat(c(i[4]))],[parseFloat(i[1]),parseFloat(i[3]),parseFloat(c(i[5]))],[0,0,1]]);else if("translate"==h)f=Matrix.I(3),f.elements[0][2]=parseFloat(c(i[0])),f.elements[1][2]=parseFloat(c(i[1]));else if("scale"==h){var j,k=parseFloat(i[0]);j=i.length>1?parseFloat(i[1]):k,f=Matrix.create([[k,0,0],[0,j,0],[0,0,1]])}else"rotate"==h?f=Matrix.RotationZ(b(i[0])):"skew"==h||"skewx"==h?(f=Matrix.I(3),f.elements[0][1]=Math.tan(b(i[0]))):"skewy"==h?(f=Matrix.I(3),f.elements[1][0]=Math.tan(b(i[0]))):console.log("Problem with setMatrixValue",h,i);e=e.multiply(f)}this.m=e},a.prototype.multiply=function(b){return new a(this.m.multiply(b.m))},a.prototype.inverse=function(){return Math.abs(this.m.elements[0][0])<1e-6&&(this.m.elements[0][0]=0),new a(this.m.inverse())},a.prototype.translate=function(b,c){var d=Matrix.I(3);return d.elements[0][2]=b,d.elements[1][2]=c,new a(this.m.multiply(d))},a.prototype.scale=function(b,c){var d=Matrix.create([[b,0,0],[0,c,0],[0,0,1]]);return new a(this.m.multiply(d))},a.prototype.rotate=function(b){var c=Matrix.RotationZ(b);return new a(this.m.multiply(c))},a.prototype.toString=function(){var a=this.m.elements,b="";return($.browser.mozilla||$.browser.opera)&&(b="px"),"matrix("+d(a[0][0])+", "+d(a[1][0])+", "+d(a[0][1])+", "+d(a[1][1])+", "+d(a[0][2])+b+", "+d(a[1][2])+b+")"},a.prototype.elements=function(){var a=this.m.elements;return{a:a[0][0],b:a[1][0],c:a[0][1],d:a[1][1],e:a[0][2],f:a[1][2]}},a}(),$.zoomooz||($.zoomooz={}),$.zoomooz.helpers=function(a,b){"use strict";var c=["-moz-","-webkit-","-o-","-ms-"];return b.forEachPrefix=function(a,b){for(var d=0;d<c.length;d++)a(c[d]);b&&a("")},b.getElementTransform=function(c){var d;return b.forEachPrefix(function(b){d=d||a(c).css(b+"transform")},!0),d},b}(jQuery,{}),function(a){"use strict";function b(a,b,c){var d={};if(v.forEachPrefix(function(b){d[b+"transform"]=a},!0),b){var e=n(b/1e3,6)+"s";d["-webkit-transition-duration"]=e,d["-o-transition-duration"]=e,d["-moz-transition-duration"]=e}if(c){var f=g(c);d["-webkit-transition-timing-function"]=f,d["-o-transition-timing-function"]=f,d["-moz-transition-timing-function"]=f}return d}function c(a,b,c,f,g,i){b||(b=e(new PureCSSMatrix)),p=(new Date).getTime(),q&&(clearInterval(q),q=null),f.easing&&(f.easingfunction=h(f.easing,f.duration)),d(a,b,c,f,g),i&&i(),q=setInterval(function(){d(a,b,c,f,g)},1)}function d(a,c,d,e,g){var h,i=(new Date).getTime()-p;h=e.easingfunction?e.easingfunction(i/e.duration):i/e.duration,a.css(b(f(m(c,d,h)))),i>e.duration&&(clearInterval(q),q=null,h=1,g&&g())}function e(a){var b=a.elements(),c=b.a,d=b.b,e=b.c,f=b.d,g=b.e,h=b.f;if(Math.abs(c*f-d*e)<.01)return void console.log("fail!");var i=g,j=h,k=Math.sqrt(c*c+d*d);c/=k,d/=k;var l=c*e+d*f;e-=c*l,f-=d*l;var m=Math.sqrt(e*e+f*f);e/=m,f/=m,l/=m,0>c*f-d*e&&(c=-c,d=-d,e=-e,f=-f,k=-k,m=-m);var n=Math.atan2(d,c);return{tx:i,ty:j,r:n,k:Math.atan(l),sx:k,sy:m}}function f(a){var b="";return b+="translate("+n(a.tx,6)+"px,"+n(a.ty,6)+"px) ",b+="rotate("+n(a.r,6)+"rad) skewX("+n(a.k,6)+"rad) ",b+="scale("+n(a.sx,6)+","+n(a.sy,6)+")"}function g(a){return a instanceof Array?"cubic-bezier("+n(a[0],6)+","+n(a[1],6)+","+n(a[2],6)+","+n(a[3],6)+")":a}function h(a,b){var c=[];if(a instanceof Array)c=a;else switch(a){case"linear":c=[0,0,1,1];break;case"ease":c=[.25,.1,.25,1];break;case"ease-in":c=[.42,0,1,1];break;case"ease-out":c=[0,0,.58,1];break;case"ease-in-out":c=[.42,0,.58,1]}var d=function(a){return i(a,c[0],c[1],c[2],c[3],b)};return d}function i(a,b,c,d,e,f){function g(a){return((m*a+n)*a+o)*a}function h(a){return((p*a+q)*a+r)*a}function i(a){return(3*m*a+2*n)*a+o}function j(a){return 1/(200*a)}function k(a,b){return h(l(a,b))}function l(a,b){function c(a){return a>=0?a:0-a}var d,e,f,h,j,k;for(f=a,k=0;8>k;k++){if(h=g(f)-a,c(h)<b)return f;if(j=i(f),c(j)<1e-6)break;f-=h/j}if(d=0,e=1,f=a,d>f)return d;if(f>e)return e;for(;e>d;){if(h=g(f),c(h-a)<b)return f;a>h?d=f:e=f,f=.5*(e-d)+d}return f}var m=0,n=0,o=0,p=0,q=0,r=0;return o=3*b,n=3*(d-b)-o,m=1-o-n,r=3*c,q=3*(e-c)-r,p=1-r-q,k(a,j(f))}function j(a,b){var c,d=v.getElementTransform(a);c=d?new PureCSSMatrix(d):new PureCSSMatrix,b&&(c=c.translate(b.x,b.y));var f=e(c);return f.r=k(d),f}function k(a){for(var b,c=0;null!==(b=t.exec(a));){var d=b[1].toLowerCase(),f=b[2].split(",");if("matrix"==d){var g=d+"("+b[2]+")";c+=e(new PureCSSMatrix(g)).r}else if("rotate"==d){var h=f[0],i=parseFloat(o(h));h.match(u)&&(i=2*Math.PI*i/360),c+=i}}return c}function l(a,b){if(Math.abs(a.r-b.r)>Math.PI)if(b.r<a.r)for(;Math.abs(a.r-b.r)>Math.PI;)b.r+=2*Math.PI;else for(;Math.abs(a.r-b.r)>Math.PI;)b.r-=2*Math.PI;return b}function m(a,b,c){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e]+(b[e]-a[e])*c);return d}function n(a,b){b=Math.abs(parseInt(b,10))||0;var c=Math.pow(10,b);return Math.round(a*c)/c}function o(a){return a.match(s)}var p,q,r,s=/([0-9.\-e]+)/g,t=/([a-z]+)\(([^\)]+)\)/g,u=/deg$/,v=a.zoomooz.helpers,w={duration:450,easing:"ease",nativeanimation:!1};jQuery.cssHooks.MsTransform={set:function(a,b){a.style.msTransform=b}},jQuery.cssHooks.MsTransformOrigin={set:function(a,b){a.style.msTransformOrigin=b}},a.fn.animateTransformation=function(d,g,h,i,k){g=jQuery.extend({},w,g),r&&(clearTimeout(r),r=null),g.nativeanimation&&i&&(r=setTimeout(i,g.duration)),this.each(function(){var m=a(this);d||(d=new PureCSSMatrix);var n=j(m,h),o=l(n,e(d));g.nativeanimation?(m.css(b(f(o),g.duration,g.easing)),k&&k()):c(m,n,o,g,i,k)})},a.fn.setTransformation=function(c){this.each(function(){var d=a(this),g=j(d),h=l(g,e(c));d.css(b(f(h)))})}}(jQuery),function(a){"use strict";function b(b,c){var d=jQuery.extend({},c);a.zoomooz.defaultSettings||a.zoomooz.setup();var e,f=a.zoomooz.defaultSettings,g=jQuery.extend({},d);for(e in f)f.hasOwnProperty(e)&&!g[e]&&(g[e]=b.data(e));for(var h=0;h<q.length;h++)e=q[h],g[e]||(g[e]=b.data(e));return jQuery.extend({},f,g)}function c(b){var c=b.createElement("style");c.type="text/css";var d="";p.forEachPrefix(function(a){d+=a+"transform-origin: 0 0;"},!0),c.innerHTML="html {height:100%;}.noScroll{overflow:hidden !important;}* {"+d+"}",a(b).ready(function(){b.getElementsByTagName("head")[0].appendChild(c);var d=window.innerWidth-a("body").width();c.innerHTML+="body.noScroll,html.noScroll body{margin-right:"+d+"px;}"})}function d(){var b={targetsize:.9,scalemode:"both",root:a(document.body),debug:!1,animationendcallback:null,closeclick:!1},c=void 0!==window.mozInnerScreenX;return b.scrollresetbeforezoom=c,b}function e(b,c){var d,e=c.scrollresetbeforezoom,j=null;!function(){var a=c.root,h=a.parent();b[0]===a[0]?j=f(a,h):a.data("original-scroll")?e||(j=f(a,h)):(d=!0,j=g(a,h,e))}();var k,l=null;h(c.root);var n=null;if(b[0]!==c.root[0]){var o=m(b,c.root).inverse();e||(n=j),k=i(b,o,n,c),c.animationendcallback&&(l=function(){c.animationendcallback.call(b[0])})}else e&&(k=(new PureCSSMatrix).translate(-j.x,-j.y)),l=function(){var d=a(c.root),f=j.elem;f.removeClass("noScroll"),d.setTransformation(new PureCSSMatrix),d.data("original-scroll",null),a(document).off("touchmove"),e&&(f[0]==document.body||f[0]==window?window.scrollTo(j.x,j.y):(f.scrollLeft(j.x),f.scrollTop(j.y))),c.animationendcallback&&c.animationendcallback.call(b[0])};var p=null;e&&j&&j.animationstartedcallback&&(p=j.animationstartedcallback),d||(n=!1),a(c.root).animateTransformation(k,c,n,l,p)}function f(a,b){var c=a.data("original-scroll");return c||(c={elem:b,x:0,"y:":0}),c}function g(b,c,d){var e=b.scrollTop(),f=b.scrollLeft(),g=b;e||(e=c.scrollTop(),f=c.scrollLeft(),g=c);var h={elem:g,x:f,y:e};b.data("original-scroll",h),a(document).on("touchmove",function(a){a.preventDefault()});var i="translate(-"+f+"px,-"+e+"px)";return p.forEachPrefix(function(a){b.css(a+"transform",i)}),g.addClass("noScroll"),d&&(h.animationstartedcallback=function(){g[0]==document.body||g[0]==document?window.scrollTo(0,0):(g.scrollLeft(0),g.scrollTop(0))}),h}function h(b){var c=a(b).parent(),d=c.width(),e=c.height(),f=d/2,g=e/2,h=n(f)+"px "+n(g)+"px";p.forEachPrefix(function(a){b.css(a+"transform-origin",h)})}function i(b,c,d,e){var f,g=e.targetsize,h=e.scalemode,i=e.root,j=a(i).parent(),k=j.width(),l=j.height(),m=k/b.outerWidth(),n=l/b.outerHeight();if("width"==h)f=g*m;else if("height"==h)f=g*n;else if("both"==h)f=g*Math.min(m,n);else{if("scale"!=h)return void console.log("wrong zoommode");f=g}var o=(k-b.outerWidth()*f)/2,p=(l-b.outerHeight()*f)/2,q=k/2,r=l/2,s=-parseFloat(i.css("margin-left"))||0,t=-parseFloat(i.css("margin-top"))||0,u=new PureCSSMatrix;d&&(u=u.translate(d.x,d.y));var v=u.translate(s,t).translate(-q,-r).translate(o,p).scale(f,f).multiply(c).translate(q,r);return v}function j(a,b,c){return[a.a*b+a.c*c+a.e,a.b*b+a.d*c+a.f]}function k(a,b){var c=m(a,b.root).elements();l(j(c,0,0)),l(j(c,0,a.outerHeight())),l(j(c,a.outerWidth(),a.outerHeight())),l(j(c,a.outerWidth(),0))}function l(b){var c="width:4px;height:4px;background-color:red;position:absolute;margin-left:-2px;margin-top:-2px;";c+="left:"+b[0]+"px;top:"+b[1]+"px;";var d='<div class="debuglabel" style="'+c+'"></div>';a("#debug").append(d)}function m(b,c){var d=b[0];if(!d||!d.ownerDocument)return null;var e,f=new PureCSSMatrix;if(d===d.ownerDocument.body){var g=jQuery.offset.bodyOffset(d);return e=new PureCSSMatrix,e=e.translate(g.left,g.top),f=f.multiply(e)}var h;jQuery.offset.initialize?(jQuery.offset.initialize(),h={fixedPosition:jQuery.offset.supportsFixedPosition,doesNotAddBorder:jQuery.offset.doesNotAddBorder,doesAddBorderForTableAndCells:jQuery.support.doesAddBorderForTableAndCells,subtractsBorderForOverflowNotVisible:jQuery.offset.subtractsBorderForOverflowNotVisible}):h=jQuery.support;var i,j,k=d.offsetParent,l=d.ownerDocument,m=l.documentElement,n=l.body,p=c[0],q=l.defaultView;j=q?q.getComputedStyle(d,null):d.currentStyle;var r=d.offsetTop,s=d.offsetLeft,t=o().translate(s,r);for(t=t.multiply(o(d)),f=t.multiply(f);(d=d.parentNode)&&d!==p&&(r=0,s=0,!h.fixedPosition||"fixed"!==j.position);)i=q?q.getComputedStyle(d,null):d.currentStyle,r-=d.scrollTop,s-=d.scrollLeft,d===k&&(r+=d.offsetTop,s+=d.offsetLeft,!h.doesNotAddBorder||h.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(d.nodeName)||(r+=parseFloat(i.borderTopWidth)||0,s+=parseFloat(i.borderLeftWidth)||0),k=d.offsetParent),h.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(r+=parseFloat(i.borderTopWidth)||0,s+=parseFloat(i.borderLeftWidth)||0),j=i,d.offsetParent==p&&(r-=parseFloat(a(d.offsetParent).css("margin-top"))||0,s-=parseFloat(a(d.offsetParent).css("margin-left"))||0),t=o().translate(s,r),t=t.multiply(o(d)),f=t.multiply(f);r=0,s=0,"relative"!==j.position&&"static"!==j.position||(r+=n.offsetTop,s+=n.offsetLeft),h.fixedPosition&&"fixed"===j.position&&(r+=Math.max(m.scrollTop,n.scrollTop),s+=Math.max(m.scrollLeft,n.scrollLeft));var u=(new PureCSSMatrix).translate(s,r);return f=f.multiply(u)}function n(a){return Number(a).toFixed(6)}function o(a){var b=p.getElementTransform(a);return b?new PureCSSMatrix(b):new PureCSSMatrix}var p=a.zoomooz.helpers,q=["duration","easing","nativeanimation"];a.zoomooz||(a.zoomooz={}),a.zoomooz.setup=function(b){a.zoomooz.defaultSettings=jQuery.extend(d(),b)},a.zoomooz.setupCssStyles=function(a){a=a||document,c(a)},a.fn.zoomSettings=function(c){var d;return this.each(function(){var e=a(this);d=b(e,c)}),d},a.fn.zoomTo=function(b,c){return this.each(function(){var d=a(this);c||(b=d.zoomSettings(b)),e(d,b),b.debug?(0===a("#debug").length?a(b.root).append('<div id="debug"><div>'):a("#debug").html(""),k(d,b)):0!==a("#debug").length&&a("#debug").html("")}),this}}(jQuery),function(a){"use strict";function b(c,d,e){c.addClass("zoomTarget"),e.animationendcallback||(e.closeclick?e.animationendcallback=function(){a(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),c.addClass("selectedZoomTarget")}:e.animationendcallback=function(){a(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),c.addClass("selectedZoomTarget zoomNotClickable")});var f=d.closest(".zoomContainer");0!==f.length&&(e.root=f);var g=e.root;if(!g.hasClass("zoomTarget")){var h=g.zoomSettings({});h.animationendcallback=function(){var b=a(this);a(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),b.addClass("selectedZoomTarget zoomNotClickable"),b.parent().addClass("selectedZoomTarget zoomNotClickable")},b(g,g,h),b(g.parent(),g,h),g.click()}c.on("click",function(a){e.closeclick&&d.hasClass("selectedZoomTarget")?e.root.click():d.zoomTo(e),a.stopPropagation()})}function c(){function a(a){var b="-webkit-touch-callout: "+(a?"default":"none")+";";return d.forEachPrefix(function(c){b+=c+"user-select:"+(a?"text":"none")+";"},!0),b}var b=document.createElement("style");b.type="text/css",b.innerHTML=".zoomTarget{"+a(!1)+"}.zoomTarget:hover{cursor:pointer!important;}.zoomNotClickable{"+a(!0)+"}.zoomNotClickable:hover{cursor:auto!important;}.zoomContainer{position:relative;padding:1px;margin:-1px;}",document.getElementsByTagName("head")[0].appendChild(b)}a.zoomooz||(a.zoomooz={});var d=a.zoomooz.helpers;a.fn.zoomTarget=function(c){this.each(function(){var d=a(this).zoomSettings(c);b(a(this),a(this),d)})},a(document).ready(function(){c(),a(".zoomTarget").zoomTarget()})}(jQuery),function(a){"use strict";a.zoomooz||(a.zoomooz={}),a.fn.zoomContainer=function(a){},a(document).ready(function(){a(".zoomContainer").zoomContainer()})}(jQuery),function(a){function b(b,d){var e=c(),f=jQuery.extend({},d);for(var g in e)e.hasOwnProperty(g)&&!f[g]&&(e[g]instanceof jQuery?f[g]=a(b.data(g)):f[g]=b.data(g));return jQuery.extend({},e,f)}function c(){return{type:"next",root:a(document.body),wrap:"true"}}function d(a,b){a.addClass("zoomButton");var c;c=b.root.hasClass("zoomContainer")?b.root:b.root.find(".zoomContainer");var d=function(){function a(a){return g.indexOf(a)}function b(b){var c=a(b)+1;return c<g.length&&0!==c?g[c]:null}function d(b){var c=a(b)-1;return 0>c?null:g[c]}function e(){return g[0]}function f(){return g[g.length-1]}var g=jQuery.makeArray(c.find(".zoomTarget"));return{next:b,prev:d,last:f,first:e}}();a.on("click",function(a){var e,f=!0,g=c.find(".selectedZoomTarget");0===g.length&&(g=d.first()),0===b.type.indexOf("prev")?(e=d.prev(g[0]),null===e&&(b.wrap?e=d.last():f=!1)):(e=d.next(g[0]),null===e&&(b.wrap?e=d.first():f=!1)),f&&e.click(),a.stopPropagation()})}a.zoomooz||(a.zoomooz={});a.zoomooz.helpers;a.fn.zoomButton=function(c){this.each(function(){var e=b(a(this),c);d(a(this),e)})},a(document).ready(function(){a(".zoomButton").zoomButton()})}(jQuery);